#summary How to build our project with Apache Ant.

= Сборка / Build =

Рассматривались: [http://ant.apache.org/ Apache Ant] и [http://maven.apache.org/ Apache Maven]. Выбран _Ant_, т.к. он удовлетворяет всем нашим требованиям, а описание _build_-файла, в отличии от Maven, представляет собой описание последовтаельных команд, что мне кажется более понятным и удобным =).
-----
=Apache Ant=
-----
==Установка==
 # Скачиваем последнюю версию с [http://ant.apache.org/bindownload.cgi официального сайта], мы использовали [http://www.sai.msu.su/apache//ant/binaries/apache-ant-1.8.1-bin.tar.gz версию 1.8.1].
{{{
wget -O apache-ant.tgz http://www.sai.msu.su/apache//ant/binaries/apache-ant-1.8.1-bin.tar.gz
}}}
 # Распаковываем содержимое архива.
{{{
tar xzf apache-ant.tgz
}}}
 # Теперь нужно добавить переменные окружения.
 * ANT_HOME - путь к распакованной папке Ant'а (там где находятся папки bin, docs, lib, etc).
 Если мы установили Ant в */usr/local/ant*, то:
{{{
export ANT_HOME=/usr/local/ant
}}}
 * JAVA_HOME - путь к вашей Java Runtime Environment(JRE).
 Например так:
{{{
export JAVA_HOME=/usr/lib/jvm/java-6-openjdk
}}}
 * PATH - нужно добавить путь к папке *bin* Ant'а
{{{
export PATH=${PATH}:${ANT_HOME}/bin
}}}
-----
==Использвоание==
Если вы проделали все вышеперечисленное, то:
 # Выкачиваете из svn trunk-ветку нашего проекта.
 # И находясь в папке trunk, собираете простой командой:
{{{
ant
}}}
 * Так же можно:
 Только скомпилировать:
{{{
ant compile
}}}
 Скомпилировать и создать исполняемые .jar архивы.
{{{
ant dist
}}}
 Скомпилировать и настроить gui на tomcat. (директория tomcat'а задается в файле build.properties)
{{{
ant gui
}}}
 Все вместе. (тоже самое что просто ant)
{{{
ant install
}}}
 Очистить папку от собранных бинарников:
{{{
ant clean
}}}
 Удалить gui из tomcat'а:
{{{
ant clean-gui
}}}
 Очистить и то и другое:
{{{
ant clean-all
}}}
-----
В результате создастся папка build, внутри которой будут все скомпилированные .class файлы. А также папка dist в которой будут исполняемые .jar архивы. Также создастся папка 'agregator-gui' в ${tomcat.dir}/webapps/

Как использовать созданный miner:
{{{
java -jar "dist/miner-${DSTAMP}.jar" "resources/miner/"
}}}

А GUI теперь находится по адресу: [http://localhost:8080/agregator-gui/attractions.xml] (незабываем перезапустить tomcat - тоже в ant добавить?)
-----
===Также всем (miner,indexer,quality,*gui*) просьба выложить мини-инструкцию по запуску вашей части и от кого вы и как зависите.===