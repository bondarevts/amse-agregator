#на этой странице будет собираться информация про Miner

= Miner =
Являеться компонентом системы ответственным за сбор информации из Сети и ее сохранение в БД. Информация получаемая на выходе программы - унифицированные записи в Сырой БД.
Используемая технология: Web-Harvester.

===Как компилить и запускать Miner===
Для компиляции Miner'a потребуются JAR-файлы web-harvestera. [http://web-harvest.sourceforge.net/download/webharvest2b1-bin.zip Ссылка для скачивания]

После checkout идем в папку amse-agregator/miner и компилим командой:
{{{
 javac -cp <full path to webharvest_2.jar> ru/amse/agregator/miner/Main.java

 Пример:

iv@gate:~/amse-agregator/miner$ javac -cp /home/iv/code/webharvest2b1-bin/webharvest_2.jar ru/amse/agregator/miner/Main.java
}}}

Далее переходим на уровни ниже:
{{{
 cd ru/amse/agregator/miner/
}}}

Запускаем:
{{{
java -cp <path to class>:<path to all WebHarvester JAR files> ru.amse.agregator.miner.Main   resources/<input.txt>

Пример:

iv@gate:~/amse-agregator/miner/ru/amse/agregator/miner$ java -cp /home/iv/amse-agregator/miner/:/home/iv/code/webharvest2b1-bin/* ru.amse.agregator.miner.Main resources/main.txt
}}}


Во входном файле храняться пары вида:

'Файл с ссылками;Конфиг файл под эти ресурсы'
{{{
<linksfile>;resources/<configfile>

Пример:

wikilinks.txt;resources/wikipediaconfig.xml
wikitravellinks.txt;resources/wikitravelconfig.xml
}}}

_linksfile_ =  файл состоящий из ссылок, подлежащих обработке, записанных через Enter.

_configfile_ = конфигурационный файл, описывающий как webharvester будет обрабатывать ссылки.

На данный момент в репозиториях лежит конфиг файл для сбора информации про города из википедии (_wikipedia.config_), и файлик (_wikilinks.txt_) куда пишуться интересующие нас города на википедии.   Так же там лежит файл(_main.txt_):
{{{
wikilinks.txt;resources/wikipediaconfig.xml
}}}
который и скармливаеться java-программе.

java-программа на выходе выдает информацию вида:
 * Название города
 * Описание
 * Координаты
 * Ссылка на изображение

_Ближайший план:_ Написать конфиг файлы для _wikitravel.org_ и _archive.travel.ru_
Написать конфиги таким образом, чтобы код на ява программе обрабатывал входные данные единообразно.



Так же при выборе `WebHarvester` в качестве альтернативы, был рассмотрен вариант использовать `Visual Web Ripper`, но он оказался платным, не запускаемым под wine и не имел порта на Java.